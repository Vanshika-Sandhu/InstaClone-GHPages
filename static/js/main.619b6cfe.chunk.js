(this.webpackJsonpinsta=this.webpackJsonpinsta||[]).push([[0],{36:function(e,t,s){},37:function(e,t,s){},62:function(e,t,s){},63:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),o=s(29),c=s.n(o),a=(s(36),s(3)),l=s(4),r=s(6),d=s(5),u=(s(37),s(7)),j=s(2),p=s.n(j),h=s(0),f=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={allUsers:[],searchInput:"",searchedUser:null},e.inputBoxHandler=function(t){e.setState({searchInput:t})},e.onSearchClickHandler=function(){var t=e.state.searchInput,s=e.state.allUsers,n=null,i=!1;console.log("Inside search clicked handler");for(var o=0;o<s.length;o++)if(t===s[o].name||t===s[o].username){n=s[o],i=!0;break}i?(console.log("User found"),e.props.UserClickedHandler(n),e.setState({searchedUser:n,searchInput:""})):(console.log("User not found"),e.setState({searchedUser:null,searchInput:""})),console.log(n)},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/request").then((function(t){e.setState({allUsers:t.data.allUsers})}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)(u.b,{to:"/",children:Object(h.jsx)("img",{src:"InstaCloneColoured.png",alt:""})})}),this.props.isAuth?Object(h.jsxs)(i.a.Fragment,{children:[Object(h.jsxs)("div",{className:"search-box",children:[Object(h.jsx)("input",{type:"text",name:"",id:"",placeholder:"Search",value:this.state.searchInput,onChange:function(t){e.inputBoxHandler(t.target.value)}}),this.state.searchedUser?Object(h.jsx)(u.b,{to:"/",style:{textDecoration:"none"},children:Object(h.jsx)("div",{className:"search-icon",children:Object(h.jsx)("i",{className:"fas fa-search",onClick:this.onSearchClickHandler})})}):Object(h.jsx)(u.b,{to:"/userProfile",style:{textDecoration:"none"},children:Object(h.jsx)("div",{className:"search-icon",children:Object(h.jsx)("i",{className:"fas fa-search",onClick:this.onSearchClickHandler})})})]}),Object(h.jsx)("div",{className:"nav-links",children:Object(h.jsxs)("div",{children:[Object(h.jsx)(u.b,{to:"/",children:Object(h.jsx)("i",{className:"fas fa-home"})}),Object(h.jsx)(u.b,{to:"/profile",children:Object(h.jsx)("i",{className:"far fa-user-circle"})}),Object(h.jsx)(u.b,{to:"/notifications",children:Object(h.jsx)("i",{className:"fas fa-exclamation-circle"})}),Object(h.jsx)(u.b,{to:"/setting",children:Object(h.jsx)("i",{className:"fas fa-cog"})}),Object(h.jsx)(u.b,{to:"/",onClick:this.props.logout,children:Object(h.jsx)("i",{className:"fas fa-sign-out-alt"})})]})})]}):Object(h.jsx)("div",{className:"nav-links"})]})}}]),s}(n.Component),m=(s(62),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={userPhoto:"",username:"",caption:"",postImage:"",comments:[],likes:[],commentInput:"",postUser:null,user:null,destination:"",isLiked:!1},e.onclickHandler=function(t){console.log("Inside on clicked handler");var s=t,n=e.props.user,i=e.state.destination;i=n._id===s._id?"/profile":"/userProfile",e.props.UserClickedHandler(s),e.setState({clickedUser:s,destination:i})},e.onLikeHandler=function(){var t=e.props.post._id,s=e.props.user._id;console.log(t),console.log(s),p.a.get("api/post/like/".concat(s,"/").concat(t)).then((function(t){var s=t.data.updatedPost;console.log(s),!0===e.state.isLiked?e.setState({isLiked:!1}):e.setState({isLiked:!0}),e.setState({likes:s.likes})}))},e.onCommentTypeHandler=function(t){e.setState({commentInput:t})},e.onPostCommentHandler=function(){var t=e.props.post._id,s=e.props.user._id,n={uid:s,pid:t,comment:e.state.commentInput};p.a.post("api/post/comment/".concat(s,"/").concat(t),n).then((function(t){var s=t.data.updatedPost;e.setState({comments:s.comments,commentInput:""})}))},e.deleteMyComment=function(t){console.log("Inside delete comment from my post function");var s=e.props.post._id;e.props.user._id;p.a.delete("/api/post/comment//".concat(s,"/").concat(t)).then((function(t){var s=t.data.updatedPost;e.setState({comments:s.comments})}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.post.uid,s=this.props.post,n=this.props.user,i=n._id;p.a.get("/api/user/".concat(t)).then((function(t){for(var o=0;o<s.likes.length;o++)if(s.likes[o]===i){e.setState({isLiked:!0});break}var c=t.data.user,a=e.state.isLiked;e.setState({userPhoto:c.profilePic,username:c.username,caption:s.caption,postImage:s.postImage,comments:s.comments,likes:s.likes,commentInput:"",postUser:c,user:n,isLiked:a})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.username,n=t.userPhoto,i=t.caption,o=t.postImage,c=t.comments,a=t.likes,l=t.postUser,r=t.user,d=this.state.destination;return Object(h.jsxs)("div",{className:"post",children:[Object(h.jsxs)("div",{className:"post-header",children:[Object(h.jsx)("div",{className:"user-photo",onClick:function(){return e.onclickHandler(l)},children:Object(h.jsx)(u.b,{to:d,style:{textDecoration:"none"},children:Object(h.jsx)("img",{src:n,alt:""})})}),Object(h.jsx)(u.b,{to:d,style:{textDecoration:"none"},children:Object(h.jsx)("div",{className:"username",onClick:function(){return e.onclickHandler(l)},children:s})})]}),Object(h.jsx)("div",{className:"post-image",children:Object(h.jsx)("img",{src:o,alt:""})}),Object(h.jsxs)("div",{className:"post-footer",children:[Object(h.jsxs)("div",{className:"reactions",children:[Object(h.jsx)("div",{className:"icons",children:!0===this.state.isLiked?Object(h.jsx)("div",{className:"active-icon",onClick:this.onLikeHandler,children:Object(h.jsx)("i",{class:"fab fa-gratipay"})}):Object(h.jsx)("div",{className:"like-icon",onClick:this.onLikeHandler,children:Object(h.jsx)("i",{class:"fab fa-gratipay"})})}),Object(h.jsxs)("div",{className:"numbers",children:[Object(h.jsxs)("div",{className:"like-no",children:[a.length," Likes"]}),Object(h.jsxs)("div",{className:"comment-no",children:[c.length," Comments"]})]})]}),Object(h.jsxs)("div",{className:"caption-info",children:[Object(h.jsx)("div",{className:"username",children:s}),Object(h.jsx)("div",{className:"caption",children:i})]}),Object(h.jsxs)("div",{className:"comment-box",children:[Object(h.jsx)("div",{className:"comment-list",children:c.length?this.state.comments.map((function(t){return Object(h.jsxs)("div",{className:"comment-info",children:[Object(h.jsx)("div",{className:"user-commented username",children:t.user}),Object(h.jsx)("div",{className:"comment",children:t.comment}),r._id===t.uid?Object(h.jsx)("div",{className:"remove-comment",children:Object(h.jsx)("i",{class:"fas fa-minus-circle",onClick:function(){e.deleteMyComment(t._id)}})}):Object(h.jsx)("div",{})]},t._id)})):Object(h.jsx)("div",{className:"comment-info"})}),Object(h.jsxs)("div",{className:"comment-input",children:[Object(h.jsx)("input",{type:"text",placeholder:"Add a comment",value:this.state.commentInput,onChange:function(t){e.onCommentTypeHandler(t.target.value)}}),Object(h.jsx)("div",{className:"add-comment",onClick:this.onPostCommentHandler,children:"POST"})]})]})]})]})}}]),s}(n.Component)),b=(s(63),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={posts:[],captionInput:""},e.fileInput=i.a.createRef(),e.onUploadPostHandler=function(){var t=e.fileInput.current.files[0];console.log(t);var s=new FormData;s.append("post",t),s.append("uid",e.props.user._id),s.append("caption",e.state.captionInput),p.a.post("/api/post",s).then((function(t){t.data.postCreated&&e.componentDidMount()}))},e.onCaptionChangeHandler=function(t){e.setState({captionInput:t})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user._id;p.a.get("/api/post/feeds/".concat(t)).then((function(t){var s=t.data.myFollowingPosts.sort((function(e,t){return new Date(t.createdOn)-new Date(e.createdOn)}));e.setState({posts:s,captionInput:""})}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"feeds",children:[Object(h.jsxs)("div",{className:"new-post",children:[Object(h.jsx)("div",{className:"create-new-post",children:"CREATE NEW POST"}),Object(h.jsxs)("div",{className:"upload-post",children:[Object(h.jsx)("input",{type:"file",id:"post-image",ref:this.fileInput}),Object(h.jsx)("input",{type:"text",id:"caption",placeholder:"Add caption",value:this.state.captionInput,onChange:function(t){e.onCaptionChangeHandler(t.target.value)}}),Object(h.jsx)("button",{className:"upload-btn",onClick:this.onUploadPostHandler,children:"POST"})]})]}),this.state.posts.length?Object(h.jsx)("div",{className:"feed-body",children:this.state.posts.map((function(t){return Object(h.jsx)(m,{post:t,user:e.props.user,UserClickedHandler:e.props.UserClickedHandler},t._id)}))}):Object(h.jsx)("div",{className:"feed-body",children:"SORRY! No posts to show!"})]})}}]),s}(n.Component)),v=(s(64),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isRequestSent:!1},e.onclickHandler=function(t){console.log("Inside on clicked handler");var s=t;e.props.UserClickedHandler(s),e.setState({clickedUser:s})},e.onCancelRequestHandler=function(t){console.log("inside cancel request handler");var s=e.props.user._id,n=t._id;p.a.delete("/api/request/cancel/".concat(n,"/").concat(s)).then((function(t){"Request cancelled successfully"===t.data.message&&(console.log("Request cancelled successfully"),e.setState({isRequestSent:!1}))}))},e.sendRequestHandler=function(t){var s=e.props.user._id;console.log("Inside send request handler");var n=t._id;p.a.post("/api/request",{uid:s,followId:n}).then((function(t){console.log(t),console.log("request sent"),e.props.refreshSuggestions(),p.a.get("/api/request/".concat(n)).then((function(t){t.data.requests.map((function(e){if(e._id===s)return e})).length?e.setState({isRequestSent:!0}):e.setState({isRequestSent:!1})}))}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log("Inside component did mount");var t=this.props.user._id,s=this.props.suggestion._id;p.a.get("/api/request/".concat(s)).then((function(s){s.data.requests.map((function(e){if(e._id===t)return e})).length?e.setState({isRequestSent:!0}):e.setState({isRequestSent:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.suggestion,s=this.state.isRequestSent;return Object(h.jsxs)("div",{className:"suggested-user user-info",children:[Object(h.jsx)(u.b,{to:"/userProfile",style:{textDecoration:"none"},children:Object(h.jsx)("div",{className:"sugg-img user-image",onClick:function(){return e.onclickHandler(t)},children:Object(h.jsx)("img",{src:t.profilePic,alt:""})})}),Object(h.jsx)(u.b,{to:"/userProfile",style:{textDecoration:"none"},children:Object(h.jsxs)("div",{className:"name-info",onClick:function(){return e.onclickHandler(t)},children:[Object(h.jsx)("div",{className:"username",children:Object(h.jsx)("strong",{children:t.username})}),Object(h.jsx)("div",{className:"name",children:t.name})]})}),s?Object(h.jsx)("div",{className:"request-sent",onClick:function(){return e.onCancelRequestHandler(t)},children:"Requested"}):Object(h.jsx)("div",{className:"follow",onClick:function(){return e.sendRequestHandler(t)},children:Object(h.jsx)("i",{className:"fas fa-user-plus"})})]},t._id)}}]),s}(n.Component)),O=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={clickedUser:null,suggestions:[],isRequestSent:!1},e.onclickHandler=function(t){console.log("Inside on clicked handler");var s=t;e.props.UserClickedHandler(s),e.setState({clickedUser:s})},e.refreshSuggestions=function(){e.componentDidMount()},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log("Inside component did mount");var t=this.props.user._id;p.a.get("/api/request/suggestions/".concat(t)).then((function(t){console.log(t.data.suggestions);var s=t.data.suggestions;e.setState({suggestions:s})}))}},{key:"render",value:function(){var e=this,t=this.props.user,s=t.name,n=t.username,i=t.profilePic,o=this.state.suggestions;return console.log(o),Object(h.jsxs)("div",{className:"home-profile",children:[Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsx)(u.b,{to:"/profile",children:Object(h.jsx)("div",{className:"user-image",children:Object(h.jsx)("img",{src:i,alt:""})})}),Object(h.jsx)(u.b,{to:"/profile",style:{textDecoration:"none"},children:Object(h.jsxs)("div",{className:"name-info",children:[Object(h.jsx)("div",{className:"username",children:Object(h.jsx)("strong",{children:n})}),Object(h.jsx)("div",{className:"name",children:s})]})})]}),Object(h.jsxs)("div",{className:"user-suggestions",children:[Object(h.jsx)("div",{className:"suggestion-head",children:"Suggestions for you"}),o.length?Object(h.jsx)("div",{className:"suggestion-body",children:o.map((function(t){return Object(h.jsx)(v,{suggestion:t,user:e.props.user,UserClickedHandler:e.props.UserClickedHandler,refreshSuggestions:e.refreshSuggestions})}))}):Object(h.jsx)("div",{className:"suggestion-body",children:"SORRY! No suggestions found for you!"})]})]})}}]),s}(n.Component),g=(s(65),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={user:null},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"home",children:this.state.user?Object(h.jsxs)("div",{className:"home-body",children:[Object(h.jsx)(b,{user:this.state.user,UserClickedHandler:this.props.UserClickedHandler}),Object(h.jsx)(O,{user:this.state.user,UserClickedHandler:this.props.UserClickedHandler})]}):Object(h.jsx)("h1",{children:"Loading Data"})})}}]),s}(n.Component)),x=s(8),w=(s(66),s(67),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={caption:"",postImage:"",postId:"",likes:[],comments:[]},e.deleteCommentFromMyPost=function(t){console.log("Inside delete comment from my post function");var s=e.props.post._id;p.a.delete("/api/post/comment/".concat(s,"/").concat(t)).then((function(t){var s=t.data.updatedPost;e.setState({comments:s.comments})}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.post.caption,t=this.props.post.postImage,s=this.props.post._id,n=this.props.post.likes,i=this.props.post.comments;this.setState({postImage:t,caption:e,postId:s,likes:n,comments:i})}},{key:"render",value:function(){var e=this,t=this.state,s=t.caption,n=t.postImage,i=t.likes,o=t.comments;return Object(h.jsxs)("div",{className:"profile-user-post",children:[Object(h.jsx)("img",{src:n,alt:""}),Object(h.jsxs)("div",{className:"profile-caption-footer",children:[Object(h.jsxs)("div",{className:"profile-post-reaction-tab",children:[Object(h.jsxs)("div",{className:"post-likes",children:[i.length," likes"]}),Object(h.jsxs)("div",{className:"post-comments",children:[o.length," comments"]})]}),Object(h.jsx)("div",{className:"profile-post-image-caption",children:s}),Object(h.jsx)("div",{className:"profile-comments",children:o.length?o.map((function(t){return Object(h.jsxs)("div",{className:"profile-comment-info",children:[Object(h.jsxs)("div",{className:"profile-user-commented username",children:[t.user,":"]}),Object(h.jsx)("div",{className:"profile-comment",children:t.comment}),Object(h.jsx)("div",{className:"remove-comment",children:Object(h.jsx)("i",{class:"fas fa-minus-circle",onClick:function(){e.deleteCommentFromMyPost(t._id)}})})]},t.id)})):Object(h.jsx)("div",{className:"profile-comment-info"})})]})]})}}]),s}(n.Component)),N=(s(68),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={username:"",name:"",profilePic:"",clickedUser:null},e.onclickHandler=function(t){console.log("Inside on clicked handler");var s=t;e.props.UserClickedHandler(s),e.setState({clickedUser:s}),e.componentDidMount()},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.follow.username,t=this.props.follow.name,s=this.props.profilePic;this.setState({username:e,name:t,profilePic:s})}},{key:"render",value:function(){var e=this,t=this.props.follow,s=this.props.follow,n=s.username,i=s.name,o=s.profilePic;return Object(h.jsxs)("div",{className:"follow-component-body",children:[Object(h.jsx)(u.b,{to:"/userProfile",style:{textDecoration:"none"},children:Object(h.jsx)("div",{className:"follow-user-image",children:Object(h.jsx)("img",{src:o,alt:"",onClick:function(){return e.onclickHandler(t)}})})}),Object(h.jsx)(u.b,{to:"/userProfile",style:{textDecoration:"none"},children:Object(h.jsxs)("div",{className:"follow-user-info",children:[Object(h.jsx)("div",{className:"follow-user-name ",onClick:function(){return e.onclickHandler(t)},children:n}),Object(h.jsx)("div",{className:"follow-user-username ",onClick:function(){return e.onclickHandler(t)},children:i})]})})]})}}]),s}(n.Component)),k=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={view:"POSTS",posts:[],followers:[],following:[]},e.onPostClickHandler=function(){e.setState({view:"POSTS"})},e.onFollowerClickHandler=function(){e.setState({view:"FOLLOWERS"})},e.onFollowingClickHandler=function(){e.setState({view:"FOLLOWING"})},e.onDeletePostHandler=function(t){var s=t._id;p.a.delete("/api/post/".concat(s)).then((function(t){t.data.deletedPost&&(console.log("deleted post successfully"),e.componentDidMount())}))},e.onRemoveFollowerHandler=function(t){var s=t._id,n=e.props.user._id;p.a.delete("api/request/delete/follower/".concat(n,"/").concat(s)).then((function(t){t.data.deletedFollower&&(console.log("Follower removed successfully"),e.componentDidMount())}))},e.onUnfollowHandler=function(t){var s=t._id,n=e.props.user._id;p.a.delete("api/request/delete/following/".concat(n,"/").concat(s)).then((function(t){t.data.deletedFollowing&&(console.log("Unfollowed user successfully"),e.componentDidMount())}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user._id;console.log(t);var s=[],n=[],i=[];p.a.get("/api/post/".concat(t)).then((function(e){var n=e.data.myposts;if(console.log(n),n){var i=(s=n).sort((function(e,t){return new Date(t.createdOn)-new Date(e.createdOn)}));s=i}return p.a.get("/api/request/follower/".concat(t))})).then((function(e){var s=e.data.myFollowers;return s&&(n=s),p.a.get("/api/request/following/".concat(t))})).then((function(t){var o=t.data.myFollowing;o&&(i=o),e.setState({posts:s,followers:n,following:i})}))}},{key:"render",value:function(){var e=this,t=this.props.user,s=t.name,n=t.username,i=t.profilePic,o=t.bio;return Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsxs)("div",{className:"profile-user-info",children:[Object(h.jsx)("div",{className:"profile-user-image",children:Object(h.jsx)("img",{src:i,alt:""})}),Object(h.jsxs)("div",{className:"profile-user-detail-info",children:[Object(h.jsxs)("div",{className:"profile-user-details",children:[Object(h.jsx)("div",{className:"profile-user-username",children:n}),Object(h.jsx)("div",{className:"profile-user-name",children:s}),Object(h.jsx)("div",{className:"profile-user-bio",children:o})]}),Object(h.jsxs)("div",{className:"profile-stats",children:[Object(h.jsxs)("div",{className:"no-of-posts",onClick:function(){e.onPostClickHandler()},children:[Object(h.jsx)("strong",{children:this.state.posts.length})," Posts"]}),Object(h.jsxs)("div",{className:"no-of-followers",onClick:function(){e.onFollowerClickHandler()},children:[Object(h.jsx)("strong",{children:this.state.followers.length})," Followers"]}),Object(h.jsxs)("div",{className:"no-of-following",onClick:function(){e.onFollowingClickHandler()},children:[Object(h.jsx)("strong",{children:this.state.following.length})," Following"]})]})]})]}),Object(h.jsxs)("div",{className:"profile-user-view-info",children:[Object(h.jsx)("div",{className:"profile-view-head",children:this.state.view}),"POSTS"===this.state.view&&(this.state.posts.length?Object(h.jsx)("div",{className:"profile-view-body",children:this.state.posts.map((function(t){return Object(h.jsxs)("div",{className:"post-entity",children:[Object(h.jsx)(w,{post:t,user:e.props.user},t._id),Object(h.jsx)("div",{className:"profile-post-delete",onClick:function(){return e.onDeletePostHandler(t)},children:"Delete"})]})}))}):Object(h.jsx)("div",{className:"profile-view-body",children:"SORRY! You have no post!"})),"FOLLOWERS"===this.state.view&&(this.state.followers.length?Object(h.jsx)("div",{className:"follow-view-body",children:Object(h.jsx)("div",{className:"follow-view-list",children:this.state.followers.map((function(t){return Object(h.jsxs)("div",{className:"follow-entity",children:[Object(h.jsx)(N,{follow:t,UserClickedHandler:e.props.UserClickedHandler},t._id),Object(h.jsx)("div",{className:"follow-action-btn",children:Object(h.jsx)("div",{className:"follow-action",onClick:function(){return e.onRemoveFollowerHandler(t)},children:"Remove"})})]})}))})}):Object(h.jsx)("div",{className:"follow-view-body",children:"You have no follower!"})),"FOLLOWING"===this.state.view&&(this.state.following.length?Object(h.jsx)("div",{className:"follow-view-body",children:Object(h.jsx)("div",{className:"follow-view-list",children:this.state.following.map((function(t){return Object(h.jsxs)("div",{className:"follow-entity",children:[Object(h.jsx)(N,{follow:t,UserClickedHandler:e.props.UserClickedHandler},t._id),Object(h.jsx)("div",{className:"follow-action-btn",children:Object(h.jsx)("div",{className:"follow-action",onClick:function(){return e.onUnfollowHandler(t)},children:"Unfollow"})})]})}))})}):Object(h.jsx)("div",{className:"follow-view-body",children:"You do not follow any user!"}))]})]})}}]),s}(n.Component),y=s(31),C=(s(69),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={name:"",username:"",bio:"",password:"",profilePic:"",isPublic:!0,disabled:!0},e.fileInput=i.a.createRef(),e.onChangeHandler=function(t){var s=t.target.id,n=t.target.value;e.setState(Object(y.a)({},s,n))},e.onEditHandler=function(){e.setState({disabled:!1})},e.onCancelHandler=function(){var t=e.props.user,s=t.name,n=t.username,i=t.bio,o=t.password,c=t.profilePic,a=t.isPublic;e.setState({name:s,username:n,bio:i,password:o,profilePic:c,isPublic:a,disabled:!0})},e.onSaveHandler=function(){var t=new FormData,s=e.state,n=s.name,i=s.username,o=s.bio,c=s.password,a=s.isPublic;t.append("name",n),t.append("username",i),t.append("bio",o),t.append("isPublic",a),t.append("password",c);var l=e.props.user._id;p.a.patch("api/user/".concat(l),t).then((function(t){t.data.updatedUser&&(e.props.updateUser(t.data.updatedUser),e.setState({disabled:!0}))}))},e.onUpdateProfileHandler=function(){var t=e.fileInput.current.files[0],s=e.props.user._id,n=new FormData;n.append("user",t),p.a.patch("api/user/".concat(s),n).then((function(t){var s=t.data.updatedUser.profilePic;e.setState({profilePic:s})}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.user,t=e.name,s=e.username,n=e.bio,i=e.password,o=e.profilePic,c=e.isPublic;this.setState({name:t,username:s,bio:n,password:i,profilePic:o,isPublic:c})}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"setting",children:[Object(h.jsxs)("div",{className:"photo-edit",children:[Object(h.jsx)("div",{className:"photo-edit-header",children:"Update Profile Picture"}),Object(h.jsx)("div",{className:"userimage",children:Object(h.jsx)("img",{src:this.state.profilePic,alt:"",className:"profile-photo"})}),Object(h.jsxs)("div",{className:"upload-photo",children:[Object(h.jsx)("input",{type:"file",id:"photo-image",ref:this.fileInput}),Object(h.jsx)("div",{className:"upload-btn",onClick:this.onUpdateProfileHandler,children:"CHANGE"})]})]}),Object(h.jsxs)("div",{className:"form-edit",children:[Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsx)("div",{className:"key",children:"Name"}),Object(h.jsx)("input",{type:"text",id:"name",value:this.state.name,onChange:function(t){e.onChangeHandler(t)},disabled:this.state.disabled})]}),Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsx)("div",{className:"key",children:"Username"}),Object(h.jsx)("input",{type:"text",id:"username",value:this.state.username,onChange:function(t){e.onChangeHandler(t)},disabled:this.state.disabled})]}),Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsx)("div",{className:"key",children:"Bio"}),Object(h.jsx)("input",{type:"text",id:"bio",value:this.state.bio,onChange:function(t){e.onChangeHandler(t)},disabled:this.state.disabled})]}),Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsx)("div",{className:"key",children:"Public account"}),Object(h.jsx)("input",{type:"text",id:"isPublic",value:this.state.isPublic,onChange:function(t){e.onChangeHandler(t)},disabled:this.state.disabled})]}),Object(h.jsxs)("div",{className:"user-info",children:[Object(h.jsx)("div",{className:"key",children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password",value:this.state.password,onChange:function(t){e.onChangeHandler(t)},disabled:this.state.disabled})]}),Object(h.jsx)("div",{className:"options",children:this.state.disabled?Object(h.jsx)("div",{className:"edit",children:Object(h.jsx)("button",{onClick:this.onEditHandler,children:"EDIT"})}):Object(h.jsxs)("div",{className:"action",children:[Object(h.jsx)("div",{className:"save",children:Object(h.jsx)("button",{onClick:this.onSaveHandler,children:"SAVE"})}),Object(h.jsx)("div",{className:"cancel",children:Object(h.jsx)("button",{onClick:this.onCancelHandler,children:"CANCEL"})})]})})]})]})}}]),s}(n.Component)),H=(s(70),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={user:null,followRequests:[]},e.onAcceptRequestHandler=function(t){var s={uid:e.props.user._id,toBeAccepted:t._id};p.a.post("/api/request/accept",s).then((function(t){console.log(t),console.log("request accepted"),e.componentDidMount()}))},e.onDeleteRequestHandler=function(t){var s=e.props.user._id,n=t._id;console.log("Delete button pressed"),p.a.delete("/api/request/delete/".concat(s,"/").concat(n)).then((function(t){t.data.deletedRequest&&(console.log("request deleted successfully"),e.componentDidMount())}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user._id;this.setState({user:this.props.user,uid:t,followRequests:[]}),p.a.get("/api/request/".concat(t)).then((function(t){t.data.requests.length&&(e.followReq=t.data.requests,e.setState({followRequests:e.followReq}))}))}},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"notifications-page",children:this.state.user?Object(h.jsxs)("div",{className:"notifications",children:[Object(h.jsx)("div",{className:"notifications-body",children:Object(h.jsxs)("div",{className:"follow-requests",children:[Object(h.jsxs)("div",{className:"follow-request-header",children:[Object(h.jsx)("div",{className:"profile-view-head",children:"Follow Requests"}),Object(h.jsx)("div",{className:"follow",children:Object(h.jsx)("i",{className:"fas fa-user-plus"})})]}),Object(h.jsx)("div",{className:"follow-view-body",children:this.state.followRequests.length?Object(h.jsx)("div",{className:"follow-view-list",children:this.state.followRequests.map((function(t){return Object(h.jsxs)("div",{className:"follow-entity",children:[Object(h.jsx)(N,{follow:t}),Object(h.jsxs)("div",{className:"request-action",children:[Object(h.jsx)("div",{className:"follow-action-btn",children:Object(h.jsx)("div",{className:"follow-action",onClick:function(){return e.onAcceptRequestHandler(t)},children:"Accept"})}),Object(h.jsx)("div",{className:"follow-action-btn",children:Object(h.jsx)("div",{className:"follow-action delete",onClick:function(){return e.onDeleteRequestHandler(t)},children:"Delete"})})]})]})}))}):Object(h.jsx)("div",{className:"follow-view-body",children:"You have no follow requests!"})})]})}),Object(h.jsx)(O,{user:this.state.user})]}):Object(h.jsx)("h1",{children:"Loading Data"})})}}]),s}(n.Component)),S=(s(71),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isRequestAcccepted:!1,isFollowed:!1,isPublic:!1,view:"POSTS",posts:[],followers:[],following:[]},e.onPostClickHandler=function(){e.setState({view:"POSTS"})},e.onFollowerClickHandler=function(){e.setState({view:"FOLLOWERS"})},e.onFollowingClickHandler=function(){e.setState({view:"FOLLOWING"})},e.sendRequestHandler=function(t){var s=e.props.user._id;console.log("Inside send request handler");var n=t._id;p.a.post("/api/request",{uid:s,followId:n}).then((function(t){console.log(t),console.log("request sent"),e.state.isPublic?e.setState({isFollowed:!0,isRequestAcccepted:!0}):e.setState({isRequestAcccepted:!1})}))},e.onUnfollowHandler=function(t){var s=t._id,n=e.props.user._id;p.a.delete("api/request/delete/following/".concat(n,"/").concat(s)).then((function(t){t.data.deletedFollowing&&(console.log("Unfollowed user successfully"),e.setState({isFollowed:!1,isRequestAcccepted:!1}))}))},e.onCancelRequestHandler=function(t){console.log("inside cancel request handler");var s=e.props.user._id,n=t._id;p.a.delete("/api/request/cancel/".concat(n,"/").concat(s)).then((function(t){"Request cancelled successfully"===t.data.message&&(console.log("Request cancelled successfully"),e.setState({isFollowed:!1,isRequestAcccepted:!0}))}))},e.onclickHandler=function(t){console.log("Inside on clicked handler");var s=t;e.props.UserClickedHandler(s)},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log("inside user profile"),console.log(this.props);var t=this.props.profileUser._id,s=this.props.user._id;p.a.get("/api/request/following/".concat(s)).then((function(s){var n=s.data.myFollowing;if(n)for(var i=0;i<n.length;i++)if(n[i]._id===t){e.setState({isFollowed:!0});break}})),p.a.get("/api/request/isAccepted/".concat(t,"/").concat(s)).then((function(t){var s=t.data.message;e.state.isFollowed||("Request pending"===s?e.setState({isRequestAcccepted:!1}):e.setState({isRequestAcccepted:!0}),console.log(e.state.isRequestAcccepted))}));var n=[],i=[],o=[];p.a.get("/api/post/".concat(t)).then((function(e){var s=e.data.myposts;if(console.log(s),s){var i=(n=s).sort((function(e,t){return new Date(t.createdOn)-new Date(e.createdOn)}));n=i}return p.a.get("/api/request/follower/".concat(t))})).then((function(e){var s=e.data.myFollowers;return console.log(s),s&&(i=s),p.a.get("/api/request/following/".concat(t))})).then((function(t){var s=t.data.myFollowing;console.log(s),s&&(o=s),e.setState({isPublic:e.props.profileUser.isPublic,posts:n,followers:i,following:o})}))}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.profileUser._id,s=this.props.user._id;p.a.get("/api/request/following/".concat(s)).then((function(s){var n=s.data.myFollowing;if(n)for(var i=0;i<n.length;i++)if(n[i]._id===t){e.setState({isFollowed:!0});break}})),p.a.get("/api/request/isAccepted/".concat(t,"/").concat(s)).then((function(t){var s=t.data.message;e.state.isFollowed||("Request pending"===s?e.setState({isRequestAcccepted:!1}):e.setState({isRequestAcccepted:!0}),console.log(e.state.isRequestAcccepted))}));var n=[],i=[],o=[];p.a.get("/api/post/".concat(t)).then((function(e){var s=e.data.myposts;if(console.log(s),s){var i=(n=s).sort((function(e,t){return new Date(t.createdOn)-new Date(e.createdOn)}));n=i}return p.a.get("/api/request/follower/".concat(t))})).then((function(e){var s=e.data.myFollowers;return console.log(s),s&&(i=s),p.a.get("/api/request/following/".concat(t))})).then((function(t){var s=t.data.myFollowing;console.log(s),s&&(o=s),e.setState({isPublic:e.props.profileUser.isPublic,posts:n,followers:i,following:o})}))}},{key:"render",value:function(){var e=this,t=this.props.profileUser,s=t.name,n=t.username,i=t.profilePic,o=t.bio;return Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsxs)("div",{className:"profile-user-info",children:[Object(h.jsx)("div",{className:"profile-user-image",children:Object(h.jsx)("img",{src:i,alt:""})}),Object(h.jsxs)("div",{className:"profile-user-detail-info",children:[Object(h.jsxs)("div",{className:"profile-user-details",children:[Object(h.jsx)("div",{className:"profile-user-username",children:n}),Object(h.jsx)("div",{className:"profile-user-name",children:s}),Object(h.jsx)("div",{className:"profile-user-bio",children:o})]}),Object(h.jsxs)("div",{className:"profile-stats",children:[Object(h.jsxs)("div",{className:"no-of-posts",onClick:function(){e.onPostClickHandler()},children:[Object(h.jsx)("strong",{children:this.state.posts.length})," Posts"]}),Object(h.jsxs)("div",{className:"no-of-followers",onClick:function(){e.onFollowerClickHandler()},children:[Object(h.jsx)("strong",{children:this.state.followers.length})," Followers"]}),Object(h.jsxs)("div",{className:"no-of-following",onClick:function(){e.onFollowingClickHandler()},children:[Object(h.jsx)("strong",{children:this.state.following.length})," Following"]})]})]}),Object(h.jsx)("div",{className:"profile-follow-action-button",children:this.state.isFollowed?Object(h.jsx)("div",{className:"action-btn unfollow",onClick:function(){return e.onUnfollowHandler(e.props.profileUser)},children:"UNFOLLOW"}):this.state.isRequestAcccepted?Object(h.jsx)("div",{className:"action-btn",onClick:function(){return e.sendRequestHandler(e.props.profileUser)},children:"FOLLOW"}):Object(h.jsx)("div",{className:"action-btn",onClick:function(){return e.onCancelRequestHandler(e.props.profileUser)},children:"REQUESTED"})})]}),this.state.isPublic||this.state.isFollowed?Object(h.jsxs)("div",{className:"profile-user-view-info",children:[Object(h.jsx)("div",{className:"profile-view-head",children:this.state.view}),"POSTS"===this.state.view&&(this.state.posts.length?Object(h.jsx)("div",{className:"profile-view-body",children:this.state.posts.map((function(t){return Object(h.jsx)("div",{className:"post-entity",children:Object(h.jsx)(w,{post:t,user:e.props.user,UserClickedHandler:e.props.UserClickedHandler},t._id)})}))}):Object(h.jsx)("div",{className:"profile-view-body",children:"NO POSTS YET"})),"FOLLOWERS"===this.state.view&&(this.state.followers.length?Object(h.jsx)("div",{className:"follow-view-body",children:Object(h.jsx)("div",{className:"follow-view-list",children:this.state.followers.map((function(t){return Object(h.jsx)("div",{className:"follow-entity",children:Object(h.jsx)(N,{follow:t,UserClickedHandler:e.props.UserClickedHandler},t._id)})}))})}):Object(h.jsx)("div",{className:"follow-view-body",children:"NO FOLLOWERS"})),"FOLLOWING"===this.state.view&&(this.state.following.length?Object(h.jsx)("div",{className:"follow-view-body",children:Object(h.jsx)("div",{className:"follow-view-list",children:this.state.following.map((function(t){return Object(h.jsx)("div",{className:"follow-entity",children:Object(h.jsx)(N,{follow:t,UserClickedHandler:e.props.UserClickedHandler},t._id)})}))})}):Object(h.jsx)("div",{className:"follow-view-body",children:"NO FOLLOWING"}))]}):Object(h.jsx)("h1",{children:"This account is private"})]})}}]),s}(n.Component)),U=(s(72),function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)("div",{className:"login-display",children:Object(h.jsx)("img",{src:"./instaCloneDisplayPic.png",alt:""})}),Object(h.jsxs)("div",{className:"login-options",children:[Object(h.jsx)("div",{className:"login-app-logo",children:Object(h.jsx)("img",{src:"./logo.png",alt:""})}),Object(h.jsx)("div",{className:"login-app-name",children:Object(h.jsx)("img",{src:"./InstaClone.png",alt:""})}),Object(h.jsxs)("div",{className:"login-user-greetings",children:[Object(h.jsx)("div",{className:"greeting",children:"Hello there user!"}),Object(h.jsx)("div",{className:"greeting",children:"We are glad to have you here!"})]}),Object(h.jsx)("div",{className:"login-option-info",children:"Login with GOOGLE+"}),Object(h.jsx)("div",{className:"login-btn",onClick:this.props.login,children:"LOGIN"})]})]})}}]),s}(n.Component)),q=function(e){Object(r.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(a.a)(this,s);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={user:null,isAuth:!1,clickedUser:null},e.login=function(){window.location="/auth/google"},e.logout=function(){p.a.get("/auth/destroyCookie").then((function(t){e.setState({user:null,isAuth:!1,suggestions:[],clickedUser:null})}))},e.updateUser=function(t){e.setState({user:t})},e.UserClickedHandler=function(t){console.log("Inside user clicked handler"),console.log(t),e.setState({clickedUser:t})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/auth/checkAuth").then((function(t){t.data.isAuth&&e.setState({isAuth:!0,user:t.data.user})}))}},{key:"render",value:function(){var e=this.state.user,t=this.state.clickedUser;return console.log(t),Object(h.jsx)(u.a,{children:Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(f,{isAuth:this.state.isAuth,logout:this.logout,UserClickedHandler:this.UserClickedHandler}),Object(h.jsxs)(x.d,{children:[Object(h.jsx)(x.b,{path:"/",exact:!0,children:this.state.isAuth?Object(h.jsx)(g,{user:e,UserClickedHandler:this.UserClickedHandler}):Object(h.jsx)(U,{login:this.login})}),Object(h.jsx)(x.b,{path:"/profile",exact:!0,children:this.state.isAuth?Object(h.jsx)(k,{user:e,profileUser:t,UserClickedHandler:this.UserClickedHandler}):Object(h.jsx)(U,{login:this.login})}),Object(h.jsx)(x.b,{path:"/setting",exact:!0,children:this.state.isAuth?Object(h.jsx)(C,{user:e,updateUser:this.updateUser}):Object(h.jsx)(U,{login:this.login})}),Object(h.jsx)(x.b,{path:"/notifications",exact:!0,children:this.state.isAuth?Object(h.jsx)(H,{user:e,profileUser:t,UserClickedHandler:this.UserClickedHandler}):Object(h.jsx)(U,{login:this.login})}),Object(h.jsx)(x.b,{path:"/userProfile",exact:!0,children:this.state.isAuth?Object(h.jsx)(S,{user:e,profileUser:t,UserClickedHandler:this.UserClickedHandler}):Object(h.jsx)(U,{login:this.login})}),Object(h.jsx)(x.b,{path:"*",children:Object(h.jsx)(x.a,{to:"/"})})]})]})})}}]),s}(n.Component);c.a.render(Object(h.jsx)(q,{}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.619b6cfe.chunk.js.map